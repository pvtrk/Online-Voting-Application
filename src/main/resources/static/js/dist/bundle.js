(()=>{"use strict";const t="http://localhost:8080/api";window.voteForCandidate=async function(e,o){const a=await fetch(`${t}${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!a.ok){const t=`Wystąpił błąd + ${a.status}`;throw new Error(t)}},window.openModal=function(t){$(".ui.basic.modal").modal("show"),document.querySelector("#confirm-vote-button").addEventListener("click",function(t){voteForCandidate("/vote",t)}(t))},window.login=async function(t){const e=await fetch("http://localhost:8080/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:document.getElementById("username").value,password:document.getElementById("password").value})});if(!e.ok){const t=`Wystąpił błąd + ${e.status}`;throw new Error(t)}console.log(e.headers.get("Authorization"))},window.addEventListener("load",(()=>{const e=$("#app"),o=Handlebars.compile($("#error-template").html()),a=Handlebars.compile($("#main-template").html()),n=Handlebars.compile($("#vote-template").html()),s=Handlebars.compile($("#live-template").html()),i=Handlebars.compile($("#faq-template").html()),l=new Router({mode:"history",page404:t=>{const a=o({color:"yellow",title:"Nie znaleziono strony!",message:`Adres '/${t}' nie jestnieje!`});e.html(a)}});l.add("/",(()=>{let t=a();e.html(t)})),l.add("/vote",(async()=>{let o=n();e.html(o);try{const a=await async function(e){const o=await fetch(`${t}/candidates`);if(!o.ok){const t=`Wystąpił błąd: ${o.status}!`;throw new Error(t)}return await o.json()}();o=n({candidates:a}),e.html(o)}catch(t){console.error(t)}})),l.add("/live",(()=>{let t=s();e.html(t)})),l.add("/faq",(()=>{let t=i();e.html(t)})),l.navigateTo(window.location.pathname),$(`a[href$='${window.location.pathname}']`).addClass("active"),$("a").on("click",(t=>{t.preventDefault();const e=$(t.target);$(".item").removeClass("active"),e.addClass("active");const o=e.attr("href"),a=o.substr(o.lastIndexOf("/"));l.navigateTo(a)}))}))})();